<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <title>–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ WayForPay</title>
    <script src="https://secure.wayforpay.com/server/pay-widget.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>

<body>

    <button onclick="pay()">–û–ø–ª–∞—Ç–∏—Ç–∏</button>

    <script>
        function pay() {
            const wayforpay = new Wayforpay();

            // üîê –¢–≤—ñ–π —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á
            const secretKey = "bba6cb311a2d984d82bd74847c220a4ad1dd75fd";

            // üî¢ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —É–Ω—ñ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
            const orderReference = "ORDER" + Math.floor(Math.random() * 1000000);
            const orderDate = Math.floor(Date.now() / 1000);

            const paymentData = {
                merchantAccount: "artemromaniuk_github_io",
                merchantDomainName: "artemromaniuk.github.io",
                orderReference: orderReference,
                orderDate: orderDate,
                amount: 100,
                currency: "UAH",
                productName: ["–¢–µ—Å—Ç–æ–≤–∏–π —Ç–æ–≤–∞—Ä"],
                productPrice: [100],
                productCount: [1],
                clientFirstName: "–Ü–º‚Äô—è",
                clientLastName: "–ü—Ä—ñ–∑–≤–∏—â–µ",
                clientEmail: "client@example.com",
                language: "UA"
            };

            // üîê –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø—ñ–¥–ø–∏—Å—É
            const signatureBase = [
                paymentData.merchantAccount,
                paymentData.merchantDomainName,
                paymentData.orderReference,
                paymentData.orderDate,
                paymentData.amount,
                paymentData.currency,
                paymentData.productName[0],
                paymentData.productCount[0],
                paymentData.productPrice[0]
            ].join(';');

            paymentData.merchantSignature = CryptoJS.SHA1(signatureBase + secretKey).toString();

            // üîÑ –í—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–æ—Ä–º—É WayForPay
            wayforpay.run(
                paymentData,
                function (response) {
                    console.log("‚úî –û–ø–ª–∞—Ç–∞ —É—Å–ø—ñ—à–Ω–∞", response);
                },
                function (response) {
                    console.log("‚ùå –û–ø–ª–∞—Ç—É —Å–∫–∞—Å–æ–≤–∞–Ω–æ", response);
                },
                function (response) {
                    console.log("‚ö† –ü–æ–º–∏–ª–∫–∞", response);
                }
            );
        }
    </script>

</body>

</html>