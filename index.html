<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <title>Test WayForPay</title>
    <script src="https://secure.wayforpay.com/server/pay-widget.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>

<body>
    <button onclick="pay()">Оплатити тест</button>
    <script>
        function pay() {
            const wayforpay = new Wayforpay();
            const secretKey = "flk3409refn54t54t*FNJRET";
            const orderReference = "TESTORDER" + Math.floor(Math.random() * 100000);
            const orderDate = Math.floor(Date.now() / 1000);
            const amount = 1;
            const currency = "UAH";
            const productName = ["Тест"];
            const productPrice = [1];
            const productCount = [1];
            const merchantAccount = "test_merch_n1";
            const merchantDomainName = "https://artemromaniuk.github.io/test_wayforpay/";
            const signatureSource = [
                merchantAccount,
                merchantDomainName,
                orderReference,
                orderDate,
                amount,
                currency,
                productName[0],
                productCount[0],
                productPrice[0]
            ].join(';');
            const signature = CryptoJS.SHA1(signatureSource + secretKey).toString();

            const data = {
                merchantAccount,
                merchantDomainName,
                orderReference,
                orderDate,
                amount,
                currency,
                productName,
                productCount,
                productPrice,
                clientFirstName: "Тест",
                clientLastName: "Користувач",
                clientEmail: "test@example.com",
                language: "UA",
                merchantSignature: signature
            };

            wayforpay.run(
                data,
                function (res) { console.log("✅ Success", res); },
                function (res) { console.warn("❌ Canceled", res); },
                function (res) { console.error("⚠ Error", res); }
            );
        }
    </script>
</body>

</html>