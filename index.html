<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <title>WayForPay Test</title>
    <script src="https://secure.wayforpay.com/server/pay-widget.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>

<body>

    <button onclick="pay()">Оплатити</button>

    <script>
        function pay() {
            const wayforpay = new Wayforpay();

            const secretKey = "bba6cb311a2d984d82bd74847c220a4ad1dd75fd";
            const orderReference = "ORDER" + Math.floor(Math.random() * 1000000);
            const orderDate = Math.floor(Date.now() / 1000);
            const amount = 100;
            const currency = "UAH";
            const productName = ["Тестовий товар"];
            const productPrice = [100];
            const productCount = [1];

            const merchantAccount = "artemromaniuk_github_io";
            const merchantDomainName = "artemromaniuk.github.io";

            const signatureSource = [
                merchantAccount,
                merchantDomainName,
                orderReference,
                orderDate,
                amount,
                currency,
                productName[0],
                productCount[0],
                productPrice[0]
            ].join(';');

            const signature = CryptoJS.SHA1(signatureSource + secretKey).toString();

            const paymentData = {
                merchantAccount: merchantAccount,
                merchantDomainName: merchantDomainName,
                orderReference: orderReference,
                orderDate: orderDate,
                amount: amount,
                currency: currency,
                productName: productName,
                productPrice: productPrice,
                productCount: productCount,
                clientFirstName: "Ім’я",
                clientLastName: "Прізвище",
                clientEmail: "client@example.com",
                language: "UA",
                merchantSignature: signature
            };

            wayforpay.run(
                paymentData,
                function (response) {
                    alert("✔ Оплата успішна!");
                    console.log(response);
                },
                function (response) {
                    alert("❌ Оплату скасовано");
                    console.log(response);
                },
                function (response) {
                    alert("⚠ Помилка");
                    console.error(response);
                }
            );
        }
    </script>

</body>

</html>